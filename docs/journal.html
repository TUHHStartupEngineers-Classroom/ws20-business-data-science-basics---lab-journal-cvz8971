<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Nele Helena Thomsen" />

<meta name="date" content="2020-11-28" />

<title>Journal (reproducible report)</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">MyLabJournal</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="journal.html">Journal</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Class notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="dictionary.html">Dictionary</a>
    </li>
    <li>
      <a href="data_wrangling.html">Data Wrangling</a>
    </li>
    <li>
      <a href="ggplot_graphs.html">ggplot graphs</a>
    </li>
    <li>
      <a href="machine_learning.html">machine learning</a>
    </li>
  </ul>
</li>
<li>
  <a href="links.html">Links</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Journal (reproducible report)</h1>
<h4 class="author">Nele Helena Thomsen</h4>
<h4 class="date">2020-11-28</h4>

</div>


<p>Last compiled: 2020-12-03</p>
<p>So far this is just a blog where you can write in plain text and serve your writing to a webpage. One of the main purposes of this lab journal is to record your progress learning R. The reason I am asking you to use this process is because you can both make a website, and a lab journal, and learn R all in R-studio. This makes everything really convenient and in the same place.</p>
<p>So, let’s say you are learning how to make a histogram in R. For example, maybe you want to sample 100 numbers from a normal distribution with mean = 0, and standard deviation = 1, and then you want to plot a histogram. You can do this right here by using an r code block, like this:</p>
<p>When you knit this R Markdown document, you will see that the histogram is printed to the page, along with the R code. This document can be set up to hide the R code in the webpage, just delete the comment (hashtag) from the cold folding option in the yaml header up top. For purposes of letting yourself see the code, and me see the code, best to keep it the way that it is. You’ll learn that all of these things and more can be customized in each R code block.</p>
<p>First, it is necessary to load the … packages ….</p>
<pre class="r"><code># packages
pkgs_cran &lt;- c(
  &quot;fs&quot;,         # working with the file system
  &quot;readxl&quot;,     # reading excel files
  &quot;writexl&quot;,    # saving data as excel files
  &quot;tidyverse&quot;,  # dplyr, ggplot2, tibble, tidyr, readr, purrr, stringr, forcats
  &quot;lubridate&quot;,  # working with dates and times
  &quot;devtools&quot;,   # used to install non-CRAN packages
  &quot;RSQLite&quot;,    # to open up a connection to the database
  &quot;dplyr&quot;,
  &quot;DBI&quot;,
  &quot;httr&quot;,       # for http requests
  &quot;glue&quot;,       # concatenation and interpolation of strings
  &quot;jsonlite&quot;,   # JSON structure &lt;-&gt; character format
  &quot;rstudioapi&quot;, # credentials
  &quot;rvest&quot;,      # finding the relevant fields which contain the desired information
  &quot;stringr&quot;,    # for data cleaning and preparation 
  &quot;stringi&quot;,    # character string/ text processing
  &quot;xopen&quot;,      # quickly opening URLs
#  &quot;purrr&quot;,      # suite of functions for iteration and functional programming
  &quot;furrr&quot;,      # parallel Processing
  &quot;data.table&quot;, # alternative to default data.frame or tibble to handle tabular data
  &quot;vroom&quot;,      # fast reading in of delimited files
  &quot;tictoc&quot;,     # counter
  &quot;ggmap&quot;       # for map_data 
)
install.packages(pkgs_cran)  </code></pre>
<pre><code>## Error in install.packages : Updating loaded packages</code></pre>
<pre class="r"><code>install.packages(&quot;mapsapi&quot;)</code></pre>
<pre><code>## Error in install.packages : Updating loaded packages</code></pre>
<pre class="r"><code>install.packages(&quot;leaflet&quot;)</code></pre>
<pre><code>## Error in install.packages : Updating loaded packages</code></pre>
<pre class="r"><code>library(mapsapi)
library(leaflet)


# libraries
library(&quot;writexl&quot;)
library(&quot;fs&quot;)
library(&quot;devtools&quot;)
library(tidyverse)
library(readxl)
library(lubridate)
library(&quot;RSQLite&quot;)
library(&quot;dplyr&quot;)
library(&quot;DBI&quot;)
library(httr)
library(glue)
library(jsonlite)
library(&quot;rstudioapi&quot;)
library(rvest)
library(&quot;stringr&quot;)
library(xopen)
library(stringi)
library(furrr)
library(data.table)
library(vroom)
library(tictoc)
library(maps)
library(ggmap)</code></pre>
<div id="intro-to-the-tidyverse" class="section level1">
<h1><span class="header-section-number">1</span> Intro to the tidyverse</h1>
<p>Text …</p>
<pre class="r"><code># import files
bikes_tbl      &lt;- read_excel(&quot;DS_101/00_data/01_bike_sales/01_raw_data/bikes.xlsx&quot;)
orderlines_tbl &lt;- read_excel(&quot;DS_101/00_data/01_bike_sales/01_raw_data/orderlines.xlsx&quot;)
bikeshops_tbl  &lt;- read_excel(&quot;DS_101/00_data/01_bike_sales/01_raw_data/bikeshops.xlsx&quot;)

# examine data
glimpse(bikeshops_tbl)</code></pre>
<pre><code>## Rows: 30
## Columns: 5
## $ bikeshop.id &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, ...
## $ name        &lt;chr&gt; &quot;Zum Goldenen Lenker&quot;, &quot;AlexandeRad&quot;, &quot;Fahrradladen 16&quot;...
## $ location    &lt;chr&gt; &quot;Berlin, Berlin&quot;, &quot;Hamburg, Hamburg&quot;, &quot;Munich, Bavaria&quot;...
## $ lat         &lt;dbl&gt; 52.51667, 53.57532, 48.15000, 50.93333, 50.11552, 48.78...
## $ lng         &lt;dbl&gt; 13.400000, 10.015340, 11.583333, 6.950000, 8.684167, 9....</code></pre>
<pre class="r"><code># join data
bike_orderlines_joined_tbl &lt;- orderlines_tbl %&gt;%
  left_join(bikes_tbl, by = c(&quot;product.id&quot; = &quot;bike.id&quot;)) %&gt;%
  left_join(bikeshops_tbl, by = c(&quot;customer.id&quot; = &quot;bikeshop.id&quot;))

# wrangling data
bike_orderlines_joined_tbl %&gt;% 
  select(location) %&gt;%
  filter(str_detect(location, &quot;^Hamburg&quot;)) %&gt;% 
  unique()</code></pre>
<pre><code>## # A tibble: 1 x 1
##   location        
##   &lt;chr&gt;           
## 1 Hamburg, Hamburg</code></pre>
<pre class="r"><code>bikeshop_orderlines_wrangled_tbl &lt;- bike_orderlines_joined_tbl %&gt;%
  separate(col    = location,
           into   = c(&quot;city&quot;, &quot;state&quot;),
           sep    = &quot;, &quot;) %&gt;%
  
  # Add the total price (price * quantity) 
  # Add a column to a tibble that uses a formula-style calculation of other columns
  mutate(total.price = price * quantity) %&gt;%
  
  # Optional: Reorganize. Using select to grab or remove unnecessary columns
  # by exact column name
  select(-...1, -gender) %&gt;%
  
  # by a pattern
  # You can use the select_helpers to define patterns. 
  # Type ?ends_with and click on Select helpers in the documentation
  select(-ends_with(&quot;.id&quot;)) %&gt;%
  
  # Actually we need the column &quot;order.id&quot;. Let&#39;s bind it back to the data
  bind_cols(bike_orderlines_joined_tbl %&gt;% select(order.id)) %&gt;% 
  
  # You can reorder the data by selecting the columns in your desired order.
  # You can use select_helpers like contains() or everything()
  select(order.id, contains(&quot;order&quot;), contains(&quot;model&quot;), contains(&quot;category&quot;),
         price, quantity, total.price,
         everything()) %&gt;%
  
  # Rename columns because we actually wanted underscores instead of the dots
  # (one at the time vs. multiple at once)
  rename(bikeshop = name) %&gt;%
  set_names(names(.) %&gt;% str_replace_all(&quot;\\.&quot;, &quot;_&quot;))

#glimpse(bike_orderlines_joined_tbl)
#glimpse(bikeshop_orderlines_wrangled_tbl)</code></pre>
<div id="sales-by-location" class="section level2">
<h2><span class="header-section-number">1.1</span> Sales by location</h2>
<pre class="r"><code># Manipulate
sales_by_location_tbl &lt;- bikeshop_orderlines_wrangled_tbl %&gt;%
  select(state, total_price) %&gt;%
  mutate(state) %&gt;%                         # add state column
  group_by(state) %&gt;%                       # group by state and summarize sales
  summarize(sales = sum(total_price)) %&gt;%
  mutate(sales_text = scales::dollar(sales, big.mark = &quot;.&quot;, 
                                     decimal.mark = &quot;,&quot;, 
                                     prefix = &quot;&quot;, 
                                     suffix = &quot; €&quot;))
# sales_by_location_tbl

# Visualize
sales_by_location_tbl %&gt;%
  # setup canvas with the columns state (x-axis) and sales (y-axis)
  ggplot(aes(x = state, y = sales)) +
  # geometries
  geom_col(fill = &quot;#2DC6D6&quot;) +              # bar plot
  geom_label(aes(label = sales_text)) +     # labels to the bars
  geom_smooth(method = &quot;lm&quot;, se = FALSE) +  # trendline
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
  # formatting
  scale_y_continuous(labels = scales::dollar_format(big.mark = &quot;.&quot;,
                                                    decimal.mark = &quot;,&quot;,
                                                    prefix = &quot;&quot;,
                                                    suffix = &quot; €&quot;)) +
  labs(
    title    = &quot;Revenue by state&quot;,
    subtitle = &quot;Most bikes has been sold in North Rhine-Westphalia&quot;,
    x = &quot;&quot;,
    y = &quot;Revenue&quot;
  )</code></pre>
<p><img src="journal_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
</div>
<div id="sales-by-location-and-year" class="section level2">
<h2><span class="header-section-number">1.2</span> Sales by location and year</h2>
<pre class="r"><code>sales_by_year_state_tbl &lt;- bikeshop_orderlines_wrangled_tbl %&gt;%
  select(order_date, total_price, state) %&gt;%  
  mutate(year = year(order_date)) %&gt;%
  group_by(year, state) %&gt;%
  summarise(sales = sum(total_price)) %&gt;%
  ungroup() %&gt;%
  
  # Format $ Text
  mutate(sales_text = scales::dollar(sales, big.mark = &quot;.&quot;,
                                     decimal.mark = &quot;,&quot;,
                                     prefix = &quot;&quot;,
                                     suffix = &quot; €&quot;))

# sales_by_year_state_tbl 

# Visualize
sales_by_year_state_tbl %&gt;%
  ggplot(aes(x = year, y = sales, fill = state)) +
  # Geometries
  geom_col() +
  facet_wrap(~ state) +
  # Formatting
  scale_y_continuous(labels = scales::dollar_format(big.mark = &quot;.&quot;,
                                                    decimal.mark = &quot;,&quot;,
                                                    prefix = &quot;&quot;,
                                                    suffix = &quot; €&quot;)) +
  labs(
    title = &quot;Revenue by year and state&quot;,
    subtitle = &quot;Most of the states have an upward trend&quot;,
    fill = &quot;State&quot;
  )</code></pre>
<p><img src="journal_files/figure-html/unnamed-chunk-4-1.png" width="960" /></p>
<pre class="r"><code># store files
# Excel
bikeshop_orderlines_wrangled_tbl %&gt;%
  write_xlsx(&quot;DS_101/00_data/01_bike_sales/02_wrangled_data/bikeshop_orderlines.xlsx&quot;)

# CSV
bikeshop_orderlines_wrangled_tbl %&gt;% 
  write_csv(&quot;DS_101/00_data/01_bike_sales/02_wrangled_data/bikeshop_orderlines.csv&quot;)

# RDS
bikeshop_orderlines_wrangled_tbl %&gt;% 
  write_rds(&quot;DS_101/00_data/01_bike_sales/02_wrangled_data/bikeshop_orderlines.rds&quot;)</code></pre>
</div>
</div>
<div id="data-acquisition" class="section level1">
<h1><span class="header-section-number">2</span> Data Acquisition</h1>
<p>Last compiled: 2020-12-03</p>
<pre class="r"><code>#install.packages(RSQLite)
install.packages(dplyr)</code></pre>
<pre><code>## Error in install.packages : Objekt &#39;dplyr&#39; nicht gefunden</code></pre>
<pre class="r"><code>#library(RSQLite)
library(dplyr)
con &lt;- RSQLite::dbConnect(drv    = SQLite(), 
                          dbname = &quot;DS_101/00_data/02_chinook/Chinook_Sqlite.sqlite&quot;)
dbListTables(con)</code></pre>
<pre><code>##  [1] &quot;Album&quot;         &quot;Artist&quot;        &quot;Customer&quot;      &quot;Employee&quot;      &quot;Genre&quot;        
##  [6] &quot;Invoice&quot;       &quot;InvoiceLine&quot;   &quot;MediaType&quot;     &quot;Playlist&quot;      &quot;PlaylistTrack&quot;
## [11] &quot;Track&quot;</code></pre>
<pre class="r"><code>tbl(con, &quot;Album&quot;)</code></pre>
<pre><code>## # Source:   table&lt;Album&gt; [?? x 3]
## # Database: sqlite 3.33.0
## #   [C:\Users\nelet\Documents\GitHub\ws20-business-data-science-basics---lab-journal-cvz8971\DS_101\00_data\02_chinook\Chinook_Sqlite.sqlite]
##    AlbumId Title                                 ArtistId
##      &lt;int&gt; &lt;chr&gt;                                    &lt;int&gt;
##  1       1 For Those About To Rock We Salute You        1
##  2       2 Balls to the Wall                            2
##  3       3 Restless and Wild                            2
##  4       4 Let There Be Rock                            1
##  5       5 Big Ones                                     3
##  6       6 Jagged Little Pill                           4
##  7       7 Facelift                                     5
##  8       8 Warner 25 Anos                               6
##  9       9 Plays Metallica By Four Cellos               7
## 10      10 Audioslave                                   8
## # ... with more rows</code></pre>
<p>get directions from the Google Maps Directions API</p>
<pre class="r"><code># API parameter
key &lt;- &quot;AIzaSyBrRUkv83znL_giJRlEpTq03oN8IaXV-rM&quot;
url &lt;- &quot;https://maps.googleapis.com/maps/api/directions/json?&quot;
modes &lt;- c(&quot;driving&quot;,&quot;transit&quot;, &quot;walking&quot;, &quot;bicycling&quot;)
tra_model &lt;- c(&quot;best_guess&quot;, &quot;pessimistic&quot;, &quot;optimistic&quot;)
avoid = c(NA, &quot;tolls&quot;, &quot;highways&quot;, &quot;ferries&quot;, &quot;indoor&quot;)
dep_time = Sys.time() + as.difftime(1, units = &quot;hours&quot;)


route = mp_directions(
  origin = &quot;Schoene Aussicht Hamburg&quot;,
  destination = &quot;Elbphilharmonie Hamburg&quot;,
  #departure_time = dep_time,
  mode = modes[[1]],  
  #traffic_model = tra_model[[1]],
  alternatives = FALSE,
  key = key,
  quiet = TRUE
)
route_data = mp_get_routes(route)

# visualization
#pal = colorFactor(palette = &quot;Dark2&quot;, domain = route_data$alternative_id)
#leaflet() %&gt;% 
#  addProviderTiles(&quot;CartoDB.DarkMatter&quot;) %&gt;%
#  addPolylines(data = route_data, opacity = 0.9, weight = 6, color = #~pal(alternative_id))


# extract Separate segments
route_seg = mp_get_segments(route)
head(route_seg)</code></pre>
<pre><code>## Simple feature collection with 6 features and 12 fields
## geometry type:  LINESTRING
## dimension:      XY
## bbox:           xmin: 10.00941 ymin: 53.56434 xmax: 10.01964 ymax: 53.57179
## geographic CRS: WGS 84
##       alternative_id leg_id segment_id       summary travel_mode
## 1-1-1              1      1          1 An der Alster     driving
## 1-1-2              1      1          2 An der Alster     driving
## 1-1-3              1      1          3 An der Alster     driving
## 1-1-4              1      1          4 An der Alster     driving
## 1-1-5              1      1          5 An der Alster     driving
## 1-1-6              1      1          6 An der Alster     driving
##                                                                 instructions
## 1-1-1 Head &lt;b&gt;south&lt;/b&gt; on &lt;b&gt;Schöne Aussicht&lt;/b&gt; toward &lt;b&gt;Auguststraße&lt;/b&gt;
## 1-1-2                              Turn &lt;b&gt;left&lt;/b&gt; onto &lt;b&gt;Auguststraße&lt;/b&gt;
## 1-1-3                    Turn &lt;b&gt;right&lt;/b&gt; onto &lt;b&gt;Heinrich-Hertz-Straße&lt;/b&gt;
## 1-1-4           Turn &lt;b&gt;right&lt;/b&gt; at the 1st cross street onto &lt;b&gt;Hofweg&lt;/b&gt;
## 1-1-5                                   Continue onto &lt;b&gt;Papenhuder Str.&lt;/b&gt;
## 1-1-6                         Turn &lt;b&gt;right&lt;/b&gt; onto &lt;b&gt;Mundsburger Damm&lt;/b&gt;
##       distance_m distance_text duration_s duration_text departure_time
## 1-1-1        158        0.2 km         30         1 min           &lt;NA&gt;
## 1-1-2        325        0.3 km         72         1 min           &lt;NA&gt;
## 1-1-3        129        0.1 km         46         1 min           &lt;NA&gt;
## 1-1-4        365        0.4 km         62         1 min           &lt;NA&gt;
## 1-1-5        371        0.4 km         77         1 min           &lt;NA&gt;
## 1-1-6        179        0.2 km         30         1 min           &lt;NA&gt;
##       arrival_time                       geometry
## 1-1-1         &lt;NA&gt; LINESTRING (10.00941 53.571...
## 1-1-2         &lt;NA&gt; LINESTRING (10.01047 53.569...
## 1-1-3         &lt;NA&gt; LINESTRING (10.01412 53.571...
## 1-1-4         &lt;NA&gt; LINESTRING (10.01602 53.571...
## 1-1-5         &lt;NA&gt; LINESTRING (10.01806 53.568...
## 1-1-6         &lt;NA&gt; LINESTRING (10.01964 53.565...</code></pre>
<pre class="r"><code>pal = colorFactor(
  palette = sample(colors(), length(unique(route_seg$segment_id))), 
  domain = route_seg$segment_id
)

#leaflet(route_seg) %&gt;% 
#  addProviderTiles(&quot;CartoDB.DarkMatter&quot;) %&gt;%
#  addPolylines(opacity = 0.9, weight = 6, color = ~pal(segment_id), popup = ~instructions)</code></pre>
</div>
<div id="data-wrangling" class="section level1">
<h1><span class="header-section-number">3</span> Data Wrangling</h1>
<pre class="r"><code>## patent

col_types_patent &lt;- list(
 id = col_character(),
 type = col_skip(), #col_character(),
 number = col_character(),
 country = col_character(),
 date = col_date(&quot;%Y-%m-%d&quot;),
 abstract = col_skip(), #col_character(),
 title = col_skip(), #col_character(),
 kind = col_skip(), #col_character(),
 num_claims = col_double(),
 filename = col_skip(), #col_character(),
 withdrawn = col_double()
)
 
patent_tbl &lt;- vroom(
 file       = &quot;DS_101/00_data/patent/patent.tsv&quot;, ######################
 #file       = &quot;patent.tsv/patent.tsv&quot;, 
 delim      = &quot;\t&quot;, 
 col_types  = col_types_patent,
 na         = c(&quot;&quot;, &quot;NA&quot;, &quot;NULL&quot;)
)
patent_tbl %&gt;% glimpse()</code></pre>
<pre><code>## Rows: 7,430,873
## Columns: 6
## $ id         &lt;chr&gt; &quot;10000000&quot;, &quot;10000001&quot;, &quot;10000002&quot;, &quot;10000003&quot;, &quot;1000000...
## $ number     &lt;chr&gt; &quot;10000000&quot;, &quot;10000001&quot;, &quot;10000002&quot;, &quot;10000003&quot;, &quot;1000000...
## $ country    &lt;chr&gt; &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;U...
## $ date       &lt;date&gt; 2018-06-19, 2018-06-19, 2018-06-19, 2018-06-19, 2018-06...
## $ num_claims &lt;dbl&gt; 20, 12, 9, 18, 6, 4, 8, 24, 11, 21, 20, 30, 21, 6, 22, 2...
## $ withdrawn  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ...</code></pre>
<pre class="r"><code>## assignee
col_types_assignee &lt;- list(
 id = col_character(),
 type = col_character(),
 name_first = col_skip(), #col_character(),
 name_last = col_skip(), #col_character(),
 organization = col_character()
)
 
assignee_tbl &lt;- vroom(
 file       = &quot;patent.tsv/assignee.tsv&quot;, 
 delim      = &quot;\t&quot;, 
 col_types  = col_types_assignee,
 na         = c(&quot;&quot;, &quot;NA&quot;, &quot;NULL&quot;)
)
assignee_tbl %&gt;% glimpse()</code></pre>
<pre><code>## Rows: 1,013,118
## Columns: 3
## $ id           &lt;chr&gt; &quot;org_0009QzvplICSOR6dUi4v&quot;, &quot;org_000ey6U69efJ6KrjwQW8&quot;...
## $ type         &lt;chr&gt; &quot;2&quot;, &quot;3&quot;, &quot;2&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;, &quot;2&quot;, &quot;2&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;,...
## $ organization &lt;chr&gt; &quot;Barr Engineering Co.&quot;, &quot;Lhoist Recherche et Developpe...</code></pre>
<pre class="r"><code>## patent_assignee
col_types_patent_assignee &lt;- list(
 patent_id = col_character(),
 assignee_id = col_character(),
 location_id = col_character()
)

patent_assignee_tbl &lt;- vroom(
 file       = &quot;patent.tsv/patent_assignee.tsv&quot;, 
 delim      = &quot;\t&quot;, 
 col_types  = col_types_patent_assignee,
 na         = c(&quot;&quot;, &quot;NA&quot;, &quot;NULL&quot;)
)
patent_assignee_tbl %&gt;% glimpse()</code></pre>
<pre><code>## Rows: 6,789,244
## Columns: 3
## $ patent_id   &lt;chr&gt; &quot;4488683&quot;, &quot;5856666&quot;, &quot;5204210&quot;, &quot;5302149&quot;, &quot;D397841&quot;, ...
## $ assignee_id &lt;chr&gt; &quot;org_zzDG6gSOdiYZdFsxQuQR&quot;, &quot;org_fBtpUrdoVp5Lzvqma3Lv&quot;,...
## $ location_id &lt;chr&gt; &quot;907f8c10-a4aa-48b5-8dbd-0a4c27e661be&quot;, &quot;a1684b60-8a79-...</code></pre>
<pre class="r"><code>## uspc ----
col_types_uspc &lt;- list(
 uuid = col_skip(), #col_character(),
 patent_id = col_character(),
 mainclass_id = col_character(),
 subclass_id = col_skip(), #col_character(),
 sequence = col_character()
)
 
uspc_tbl &lt;- vroom(
 file       = &quot;patent.tsv/uspc.tsv&quot;, 
 delim      = &quot;\t&quot;, 
 col_types  = col_types_uspc,
 na         = c(&quot;&quot;, &quot;NA&quot;, &quot;NULL&quot;)
)
 
setDT(patent_tbl)
setDT(assignee_tbl)
setDT(patent_assignee_tbl)
setDT(uspc_tbl)
#patent_tbl %&gt;% glimpse()
#patent_assignee_tbl %&gt;% glimpse()
#assignee_tbl %&gt;% glimpse()
#uspc_tbl %&gt;% glimpse()</code></pre>
<div id="patent-dominance" class="section level2">
<h2><span class="header-section-number">3.1</span> Patent dominance</h2>
<p>The 10 US companies with the most assigned/granted patents.</p>
<pre class="r"><code>a_p_a_combined &lt;- merge(x = assignee_tbl, y = patent_assignee_tbl, 
                      by.x  = &quot;id&quot;, 
                      by.y  = &quot;assignee_id&quot;,
                      all.x = TRUE, 
                      all.y = FALSE)
 
a_p_a_combined %&gt;% glimpse()</code></pre>
<pre><code>## Rows: 7,295,413
## Columns: 5
## $ id           &lt;chr&gt; &quot;org_0009QzvplICSOR6dUi4v&quot;, &quot;org_000ey6U69efJ6KrjwQW8&quot;...
## $ type         &lt;chr&gt; &quot;2&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;, &quot;2&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;,...
## $ organization &lt;chr&gt; &quot;Barr Engineering Co.&quot;, &quot;Lhoist Recherche et Developpe...
## $ patent_id    &lt;chr&gt; NA, &quot;5173279&quot;, &quot;5277837&quot;, &quot;5290353&quot;, &quot;5591247&quot;, NA, &quot;1...
## $ location_id  &lt;chr&gt; NA, &quot;6324fbf2-ac0f-4403-a100-bd54683189c3&quot;, &quot;6324fbf2-...</code></pre>
<pre class="r"><code>setkey(a_p_a_combined, &quot;id&quot;)
#key(a_p_a_combined)
setorderv(a_p_a_combined, c(&quot;id&quot;, &quot;organization&quot;))
 
a_p_a_combined %&gt;% dim()</code></pre>
<pre><code>## [1] 7295413       5</code></pre>
<pre class="r"><code>#a_p_a_combined$id %&gt;% unique()
a_p_a_combined %&gt;% glimpse()</code></pre>
<pre><code>## Rows: 7,295,413
## Columns: 5
## $ id           &lt;chr&gt; &quot;org_0009QzvplICSOR6dUi4v&quot;, &quot;org_000ey6U69efJ6KrjwQW8&quot;...
## $ type         &lt;chr&gt; &quot;2&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;, &quot;2&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;,...
## $ organization &lt;chr&gt; &quot;Barr Engineering Co.&quot;, &quot;Lhoist Recherche et Developpe...
## $ patent_id    &lt;chr&gt; NA, &quot;5173279&quot;, &quot;5277837&quot;, &quot;5290353&quot;, &quot;5591247&quot;, NA, &quot;1...
## $ location_id  &lt;chr&gt; NA, &quot;6324fbf2-ac0f-4403-a100-bd54683189c3&quot;, &quot;6324fbf2-...</code></pre>
<pre class="r"><code>us_patents &lt;- a_p_a_combined %&gt;%
 select(1:3) %&gt;%
 filter(type == &quot;2&quot;)
   
us_patents %&gt;% glimpse()</code></pre>
<pre><code>## Rows: 3,548,740
## Columns: 3
## $ id           &lt;chr&gt; &quot;org_0009QzvplICSOR6dUi4v&quot;, &quot;org_00133Cew93J5qW1EBpJT&quot;...
## $ type         &lt;chr&gt; &quot;2&quot;, &quot;2&quot;, &quot;2&quot;, &quot;2&quot;, &quot;2&quot;, &quot;2&quot;, &quot;2&quot;, &quot;2&quot;, &quot;2&quot;, &quot;2&quot;, &quot;2&quot;,...
## $ organization &lt;chr&gt; &quot;Barr Engineering Co.&quot;, &quot;Weber Genetics, LLC&quot;, &quot;Aprex ...</code></pre>
<pre class="r"><code>us_patents %&gt;%
 group_by(organization) %&gt;%
 summarise(
   count = n()
 ) %&gt;%
 ungroup() %&gt;%
 arrange(desc(count)) %&gt;%
 slice(1:10)</code></pre>
<pre><code>## # A tibble: 10 x 2
##    organization                                 count
##    &lt;chr&gt;                                        &lt;int&gt;
##  1 International Business Machines Corporation 139092
##  2 General Electric Company                     47122
##  3 Intel Corporation                            42157
##  4 Hewlett-Packard Development Company, L.P.    35573
##  5 Microsoft Corporation                        30086
##  6 Micron Technology, Inc.                      28001
##  7 QUALCOMM Incorporated                        24703
##  8 Texas Instruments Incorporated               24182
##  9 Xerox Corporation                            23174
## 10 Apple Inc.                                   21821</code></pre>
</div>
<div id="recent-patent-activity" class="section level2">
<h2><span class="header-section-number">3.2</span> Recent patent activity</h2>
<p>top 10 US companies with the most new granted patents for 2019</p>
<pre class="r"><code>a_p_a_p_combined &lt;- merge(x = patent_tbl, y = a_p_a_combined, 
                       by.x    = &quot;id&quot;,
                       by.y = &quot;patent_id&quot;,
                       all.x = TRUE, 
                       all.y = FALSE)
 
a_p_a_p_combined %&gt;% glimpse()</code></pre>
<pre><code>## Rows: 7,657,021
## Columns: 10
## $ id           &lt;chr&gt; &quot;10000000&quot;, &quot;10000001&quot;, &quot;10000002&quot;, &quot;10000003&quot;, &quot;10000...
## $ number       &lt;chr&gt; &quot;10000000&quot;, &quot;10000001&quot;, &quot;10000002&quot;, &quot;10000003&quot;, &quot;10000...
## $ country      &lt;chr&gt; &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, ...
## $ date         &lt;date&gt; 2018-06-19, 2018-06-19, 2018-06-19, 2018-06-19, 2018-...
## $ num_claims   &lt;dbl&gt; 20, 12, 9, 18, 6, 4, 8, 24, 11, 21, 20, 30, 21, 6, 22,...
## $ withdrawn    &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ id.y         &lt;chr&gt; &quot;org_nVO9qbgVusOCsqolUzwW&quot;, &quot;org_XsQO6RGuhBmfEX0Bd1cR&quot;...
## $ type         &lt;chr&gt; &quot;2&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;, &quot;2&quot;, &quot;2&quot;, NA, &quot;2&quot;, ...
## $ organization &lt;chr&gt; &quot;Raytheon Company&quot;, &quot;LS MTRON LTD.&quot;, &quot;KOLON INDUSTRIES...
## $ location_id  &lt;chr&gt; &quot;277153ee-6c5b-425a-84f5-6148e4b0cb08&quot;, &quot;7f4f050d-83b7...</code></pre>
<pre class="r"><code>setkey(a_p_a_p_combined, &quot;id&quot;)
#key(a_p_a_p_combined)
#a_p_a_p_combined$withdrawn %&gt;% unique()
setorderv(a_p_a_p_combined, c(&quot;id&quot;, &quot;organization&quot;))
 
us_patents2019 &lt;- a_p_a_p_combined %&gt;%
  filter(type == &quot;2&quot;) %&gt;%
  filter(country == &quot;US&quot;) %&gt;%
  filter(date &gt;= &quot;2019-01-01&quot; &amp; date &lt;=&quot;2019-12-01&quot;) %&gt;%
  filter(withdrawn != 1)  ####################################### richtig ?

#us_patents2019 %&gt;% glimpse()
 
#us_patents2019 %&gt;%
#  #filter(organization != na) %&gt;%
#  group_by(organization) %&gt;%   
#  summarise(
#     count = n()                       ####################### #* num_claims ?
#  ) %&gt;%
#  ungroup() %&gt;%
#  arrange(desc(count)) %&gt;%
#  slice(1:10)</code></pre>
</div>
<div id="innovation-in-tech" class="section level2">
<h2><span class="header-section-number">3.3</span> Innovation in Tech</h2>
</div>
</div>
<div id="data-visualization" class="section level1">
<h1><span class="header-section-number">4</span> Data Visualization</h1>
<div id="time-course-of-the-cumulative-covid-19-cases" class="section level2">
<h2><span class="header-section-number">4.1</span> Time course of the cumulative Covid-19 cases</h2>
<pre class="r"><code>covid_data_tbl &lt;- read_csv(&quot;https://opendata.ecdc.europa.eu/covid19/casedistribution/csv&quot;)

covid_data_tbl %&gt;% glimpse()</code></pre>
<pre><code>## Rows: 59,557
## Columns: 12
## $ dateRep                                                      &lt;chr&gt; &quot;03/12...
## $ day                                                          &lt;dbl&gt; 3, 2, ...
## $ month                                                        &lt;dbl&gt; 12, 12...
## $ year                                                         &lt;dbl&gt; 2020, ...
## $ cases                                                        &lt;dbl&gt; 202, 4...
## $ deaths                                                       &lt;dbl&gt; 19, 48...
## $ countriesAndTerritories                                      &lt;chr&gt; &quot;Afgha...
## $ geoId                                                        &lt;chr&gt; &quot;AF&quot;, ...
## $ countryterritoryCode                                         &lt;chr&gt; &quot;AFG&quot;,...
## $ popData2019                                                  &lt;dbl&gt; 380417...
## $ continentExp                                                 &lt;chr&gt; &quot;Asia&quot;...
## $ `Cumulative_number_for_14_days_of_COVID-19_cases_per_100000` &lt;dbl&gt; 7.5364...</code></pre>
<pre class="r"><code>covid_data2020_tbl &lt;- covid_data_tbl %&gt;%
  select(1:5, 7, 11, 12) %&gt;%
  filter(year == 2020)

#covid_data2020_tbl %&gt;% glimpse()

covid_data2020_tbl %&gt;%
  #group_by(continentExp) %&gt;%
  #summarize(continentCases = sum(cases)) %&gt;%
  #ungroup() %&gt;%
  filter(countriesAndTerritories %in% c(&quot;Germany&quot;, &quot;France&quot;,&quot;United_Kingdom&quot;,&quot;Spain&quot;, &quot;United_States_of_America&quot;)) %&gt;%

  ggplot(aes(month, `Cumulative_number_for_14_days_of_COVID-19_cases_per_100000`)) + 
  geom_line(aes(color = countriesAndTerritories), size = 1) + 
  scale_x_continuous(breaks = 1:11, labels =c(&#39;January&#39;, &#39;February&#39;,&#39;March&#39;, &#39;April&#39;,&#39;May&#39;, &#39;June&#39;,&#39;July&#39;, &#39;August&#39;,&#39;September&#39;, &#39;October&#39;,&#39;November&#39;)) +
  scale_y_continuous(labels = scales::dollar_format(scale = 1e-2, 
                                             prefix = &quot;&quot;,
                                             suffix = &quot;M&quot;)) +
  labs(
    title = &quot;COVID-19 confirmed cases worldwide&quot;,
    subtitle = &quot;As of 11/02/2020, Europe had more cases than the USA&quot;,
    x = &quot;Year 2020&quot;,
    y = &quot;Cumulative Cases&quot;,
    color = &quot;Continent / Country&quot;
  ) + 
  theme(
    axis.text.x = element_text(angle = 45, hjust = 1),
    legend.position = &quot;bottom&quot;,
   # legend.direction = &quot;vertical&quot;,
    plot.title = element_text(face = &quot;bold&quot;),
  ) +
  coord_cartesian(ylim = c(0, 1000))</code></pre>
<p><img src="journal_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
<div id="distribution-of-the-mortality-rate" class="section level2">
<h2><span class="header-section-number">4.2</span> Distribution of the mortality rate</h2>
<pre class="r"><code>covid_dataworld_tbl &lt;- covid_data_tbl %&gt;%
  select(1:4, 6:10) %&gt;%
  mutate(across(countriesAndTerritories, str_replace_all, &quot;_&quot;, &quot; &quot;)) %&gt;%
  mutate(countriesAndTerritories = case_when(
    countriesAndTerritories == &quot;United Kingdom&quot; ~ &quot;UK&quot;,
    countriesAndTerritories == &quot;United States of America&quot; ~ &quot;USA&quot;,
    countriesAndTerritories == &quot;Czechia&quot; ~ &quot;Czech Republic&quot;,
    TRUE ~ countriesAndTerritories
  )) %&gt;%
  group_by(countriesAndTerritories) %&gt;%
  summarize(countryDeaths = sum(deaths)) %&gt;%
  ungroup()

covid_deaths_tbl &lt;- covid_dataworld_tbl %&gt;%
  left_join(covid_data_tbl) %&gt;%
  select(1,2,11) %&gt;%
  group_by(countriesAndTerritories) %&gt;%
  distinct() %&gt;%
  mutate(Mortality_Rate = countryDeaths / popData2019) %&gt;%
  select(1,4) 

covid_deaths_tbl %&gt;% glimpse()</code></pre>
<pre><code>## Rows: 214
## Columns: 2
## Groups: countriesAndTerritories [214]
## $ countriesAndTerritories &lt;chr&gt; &quot;Afghanistan&quot;, &quot;Albania&quot;, &quot;Algeria&quot;, &quot;Andor...
## $ Mortality_Rate          &lt;dbl&gt; 4.839419e-05, 2.931079e-04, 5.723171e-05, 9...</code></pre>
<pre class="r"><code>covid_dataworld_tbl %&gt;% glimpse()</code></pre>
<pre><code>## Rows: 214
## Columns: 2
## $ countriesAndTerritories &lt;chr&gt; &quot;Afghanistan&quot;, &quot;Albania&quot;, &quot;Algeria&quot;, &quot;Andor...
## $ countryDeaths           &lt;dbl&gt; 1841, 839, 2464, 76, 351, 0, 4, 39156, 2254...</code></pre>
<pre class="r"><code>world &lt;- map_data(&quot;world&quot;)
world %&gt;% glimpse()</code></pre>
<pre><code>## Rows: 99,338
## Columns: 6
## $ long      &lt;dbl&gt; -69.89912, -69.89571, -69.94219, -70.00415, -70.06612, -7...
## $ lat       &lt;dbl&gt; 12.45200, 12.42300, 12.43853, 12.50049, 12.54697, 12.5970...
## $ group     &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, ...
## $ order     &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13, 14, 15, 16, 17, 18...
## $ region    &lt;chr&gt; &quot;Aruba&quot;, &quot;Aruba&quot;, &quot;Aruba&quot;, &quot;Aruba&quot;, &quot;Aruba&quot;, &quot;Aruba&quot;, &quot;Ar...
## $ subregion &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</code></pre>
<pre class="r"><code>covid_deaths_tbl %&gt;%
  ggplot() +
  geom_map(data = covid_deaths_tbl,
           map = world,
           aes(map_id = countriesAndTerritories, fill= Mortality_Rate),
           size=0.15,
           colour=&quot;darkred&quot; ) +
  scale_y_continuous(labels = scales::percent) +
  #scale_color_continuous(low    = &quot;#95E1EA&quot;, high = &quot;#1097A3&quot;) +
  expand_limits(x = world$long, y = world$lat)+
  coord_fixed() +
  scale_fill_continuous(low = &#39;grey&#39;, high = &#39;red&#39;) +
  theme(axis.ticks = element_blank(),
        axis.text = element_blank(),
        axis.title = element_blank(),
        legend.position = &quot;right&quot;,
        plot.title = element_text(face = &quot;bold&quot;)) +
  labs(
    title = &quot;Confirmed COVID-19 deaths relative to the size of the population&quot;,
    subtitle = &quot;More than 1.2 Million confirmed COVID-19 deaths worldwide&quot;,
    caption = &quot;Date: 12/01/2020&quot;,
    color = &quot;Mortality Rate&quot;
  )</code></pre>
<p><img src="journal_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
